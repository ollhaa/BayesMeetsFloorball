# Bayes Meets Floorball: How to Evaluate Shooting Percentages? - Technical Report

## General

*The idea for this blog post came from the desire to combine floorball and data analysis and learn a little bit about web scraping. The methods were mainly from the blog Variance Explained.* *I also noticed that the same idea has been used before by Ilari Scheinin. My own added value was to apply this to floorball, do some explanatory data analysis and predict the final number of goals scored by each player.*

*The target group of my project was floorball fans. Possibly also coaches and players itself. The goal was to better understand the possibilities of data-analysis in floorball.*

## Data

*The data was from [F-liiga](https://fliiga.com/fi/miehet/) and was obtained by web scraping. F-liiga is the highest level of floorball in Finland. All data was public without personal* *information, so there was no need for anonymization nor pseudonymization.*

### Collection

*There was no API:s for the data, so i had to use web scraping to get data. There was some problems in the data*

-   *In season 2024-2025 regular season was "Runkosarja". For the seasons before there are used "1099" and "F-liiga miehet" in the dropdown menu.*
-   *There was no player_id for players.*

*I used library R-selenium to web scraping. One thing i noticed, Javascript use running id with components, so it was not possible to use id. I had to use name of component.*

### Preprosessing

*The data needs to be tidy for analysis. In this project it was more get data to dataframe shape from raw text. Some of duties were done in webscraping (Webscraping.R) phase but some* *in tidydata (Tidydata.R) phase. I*

-   *changed the type of columns*

-   *added new columns based on min/max etc. values*

-   *added new columns based on classification*

### Visualizations

*As the saying goes, a picture is worth a thousand words. I wanted to show several informative visualizations. There were three tables and six plots in the report.* \*

-   *Plots (histograms, scatterplots and density) were generated by ggplot2 library.*

-   *Tables were generated by kable library.*

## Methods

*Methods were described pretty well in the report. Adjusted shooting percentages were calculated by using Beta-Binomial model. The prior distribution for shooting percentage was* *assumed to be Beta distributed with parameters* $\alpha$ *and* $\beta$*. I used Empirical Bayes approach to estimate parametrs by using data from this season from players more than 15 shots in total.* *The likelihood model was Binomial model where* $n$ *is number of shots and* $\theta$ *is raw shooting percentage. The estimated adjusted shooting percentage for player* $i$ *was mean of posterior distribution* *with given shots and raw shooting percentage.*

*For the predicting i used Binomial model with two fixed variables: Goals now and number of games left for each players (varies team by team). In Binomial model* $n$ was Poisson distributed variable *with parameter* $lambda_i$ which was assumed to be fixed for each player - it represented the number of shots in game based on season statistics. *The parameter* $\theta_i$ was adjusted shooting percentage for player $i$. The number of final amount of goals were simulated with 1000 times.

## Results

*The idea worked pretty well. Somehow the hardest part was the web scraping because of lack of experience and imperfections of data. Estimated shooting percentages was calculated* *to players, visuals were informative and predictions were done.*

## Future steps

*There are possibilities to expand model by using more hierarchies such as position of player. With better data there are lot of possibilities to analyze players and teams.* *For example, time on field, number of changes and place of shots would be useful. There are a lot of examples in NHL.*

## Learning outcomes

*During the project i learned a lot. First, the web scraping was challenging but did not give up. Then i studied Bayesian statistics a bit and learned more about that.* *Now i have skills to apply these methods to many other problems too.*
